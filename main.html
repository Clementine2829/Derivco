<!doctype html>
<html>
<head>
	<title>Graduate Assessment: Good Match</title>
	<!-- JQuery library -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<script src="js/jquery-3.4.1.js" type="text/javascript"></script>
</head>
<body>
	<div>
		<div>
			<label>Name 1:</label>
			<span id="err1" style="color: red"> * </span><br>
			<input type="text" onblur='validate_data($("#name1").val(), $("#err1"))' id="name1"><br>
		</div>
		<div>
			<label>Name 2:</label>
			<span id="err2" style="color: red"> * </span><br>
			<input type="text" onblur='validate_data($("#name2").val(), $("#err2"))' id="name2">
		</div>
		<p id="result1"></p>
		<button id="match_calc_btn">Calculate</button>
	</div>
</body>
<script type="text/javascript">
	$(document).ready(function(){
		$("#match_calc_btn").click(function(){
			calc_names();
		})
	});
	function calc_names(){
		//convert these strings to array of chars
		let name1 = validate_data($("#name1").val(), $("#err1")); 
		let name2 = validate_data($("#name2").val(), $("#err2"));
			
		if(name1 == "" || name2 == "") return;

		name1 = name1.split(""); 
		name2 = name2.split("");
		let text = ("matches").split("");
		let arr_names = (name1 + "," + text + "," + name2).toLowerCase().split(",");
		let arr_numbers = [];
		console.log(arr_names);
		for(let i = 0; i < arr_names.length; i++){
			let current = arr_names[i];
			let temp_count = 1;
			arr_names[i] = "";
			if(current == "") continue;
			for(let j = 1; j < arr_names.length; j++){
				if(current == arr_names[j]){
					temp_count++;
					arr_names[j] = "";
				}
			}
			arr_numbers.splice(arr_numbers.length, 0,temp_count); //add to the array
			//console.log("Arr: " + arr_names + ' \tN: ' + arr_numbers + '\n');
		}
		let result = parseInt(calc_numbers(arr_numbers));
		if(result >= 80) result = $("#name1").val() + " matches " + $("#name2").val() + " " + result + "%, good match";
		else result = $("#name1").val() + " matches " + $("#name2").val() + " " + result + "%";
		$("#result1").html(result);
	}
	function calc_numbers(arr){
		arr = [9,6];
		//arr = [2,2,2,1,1,1,1,1,1,1,2];
		//arr = [2,2,2,1,1,1,1,1,1,1];
		if(arr.length < 3){
			let temp_result = 0;
			for(let j = 0; j < arr.length; j++)
				temp_result += arr[j] + ''; 
			return temp_result; 
		} 	
			
		let arr_type = ((arr.length % 2) == 0) ? "even" : "odd"; //check if is even or odd
		let new_arr = [];
		console.log(arr);

		if(arr_type == "even"){
			//break array in half and swap the other haldd then add them then create another array to store newly created numbers 
			let arr_len = (arr.length / 2);
			let temp_arr_1 = arr.splice(0, arr_len);
			let temp_arr_2 = arr.splice(0, arr_len).reverse();
			for(let i = 0; i < arr_len; i++){
				let temp = temp_arr_1[i] + temp_arr_2[i];
				new_arr.splice(i, 0, temp);
			}
			//console.log(temp_arr_1 + "\n" + temp_arr_2);
		}else if(arr_type == "odd"){
			let arr_len = ((arr.length - 1) / 2)
			let temp_arr_1 = arr.splice(0, (arr_len + 1));
			let temp_arr_2 = arr.splice(0, (arr_len + 1)).reverse();
			for(let i = 0; i < temp_arr_2.length; i++){
				let temp = temp_arr_1[i] + temp_arr_2[i];
				new_arr.splice(i, 0, temp);
				if(i == (temp_arr_2.length - 1)){
					new_arr.splice((i + 1), 0, temp_arr_1[i]);
				}
			}
			//console.log(temp_arr_1 + "\n" + temp_arr_2);
		}
		console.log(new_arr);
	}
	function validate_data(text, err){
		let pattern = /^[a-zA-Z0-9]+$/;
		if(text == ""){
			err.html(" Name is required");
			return "";
		}else if(!text.match(pattern)){
			err.html(" Invalid use of special characters");
			return "";
		}else{
			err.html(" * ");
			return text;
	}
	}
</script>
</html>